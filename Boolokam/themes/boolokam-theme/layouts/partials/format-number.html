{{ $number := . }}

{{ if or (not $number) (eq $number 0) }}
  0
{{ else if lt $number 1000 }}
  {{ $number }}
{{ else if lt $number 10000 }}
  {{ $inK := div (float $number) 1000.0 }}
  {{ $formatted := printf "%.1fK" $inK }}
  {{ if hasSuffix $formatted ".0K" }}
    {{ replace $formatted ".0" "" }}
  {{ else }}
    {{ $formatted }}
  {{ end }}
{{ else }}
  {{ $inK := div $number 1000 }}
  {{ printf "%dK" $inK }}
{{ end }} 